<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.hulahoop.blueback.member.model.dao.UserMapper">

    <!-- id로 회원 조회 -->
    <select id="findById" parameterType="string" resultType="com.hulahoop.blueback.member.model.dto.MemberDTO">
        SELECT *
        FROM T_Member
        WHERE id = #{id}
    </select>

    <!-- 회원 등록 -->
    <insert id="insertMember" parameterType="com.hulahoop.blueback.member.model.dto.MemberDTO">
        INSERT INTO T_Member (
        member_code, name, id, password, phone_num, email, address, user_type, notification_status
        ) VALUES (
        #{memberCode}, #{name}, #{id}, #{password}, #{phoneNum},
        #{email}, #{address}, #{userType}, #{notificationStatus}
        )
    </insert>

    <!-- 아이디 중복 확인 -->
    <select id="countById" parameterType="string" resultType="int">
        SELECT COUNT(*) FROM T_Member WHERE id = #{id}
    </select>

    <!-- 마지막 회원 코드 조회 -->
    <select id="findLastMemberCode" resultType="string">
        SELECT member_code
        FROM T_Member
        WHERE member_code LIKE 'U%'
        ORDER BY member_code DESC
        LIMIT 1
    </select>

</mapper>
